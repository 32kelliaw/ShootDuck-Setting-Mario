<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <style>
        .box{
            background-size: 100% 100%;
            width:100px;
            height:100px;
            position: absolute;
           
        }
        .g1{
        	background-image: url(bg.jpg);

        }

        .t1{
            color: white;
        }
    </style>
</head>
<body class="g1">
	<div class=" col-12 text-center ct">
		<h1 class="pr t1">Очки:<span class="score">0</span></h1>
		<h1 class="t1"><span class="timer">10</span></h1>
		<button class="btn t1">Начать игру</button>
	</div>
   
    <script>
        let ct = document.querySelector(".ct");
    	let g1 = document.querySelector(".g1");
        let btn = document.querySelector(".btn");
        let int1;
        let time;
        let pr = document.querySelector('.score');
        let timer1 = document.querySelector('.timer')
        let timer = 10;
        btn.onclick = function(){
            int1 = setInterval(createElem, 500);
            time = setInterval(gameTime,1000);
            setTimeout(finish , 10000);
            function gameTime(){
            	timer = timer - 1;
            	timer1.innerHTML = timer;
            
            }
        }
        function zavod(arg){
            let rand = Math.random() * arg;
            let round = Math.round(rand); 
            return round;
        }

        let y = [200, 400, 600 ];
        let images = [ "1.png" , "2.png" , "3.png" , "4.png" ];
        let score = 0;

        function createElem(){

            let elem  = document.createElement('div');
            document.body.appendChild(elem);
            elem.classList.add("box");
            elem.style.left = zavod(1600) + 'px';
            elem.style.top = y[zavod(3)] + "px";

            let random_img = zavod(3);
            elem.style.backgroundImage = "url(" + images[random_img] + ")";

            if(random_img == 0){
                elem.name = "norm";

            }else if(random_img == 1){
                elem.name = "good";

            }else if(random_img == 2){
                elem.name = "bad";

            }else if(random_img == 3){
                elem.name = "danger";
            }
            
            elem.onclick = function(){
                elem.style.display = "none";
                
                if(elem.name == "norm"){
                    score = score + 1;
                    pr.innerHTML = score;

                }else if(elem.name == "good"){
                    score = score + 2;
                    pr.innerHTML = score;

                }else if(elem.name == "bad"){
                    score = score - 2;
                    pr.innerHTML = score;

                }else if(elem.name == "danger"){
                    score = score - 5;
                    pr.innerHTML = score;
                }


                console.log(score);
            }

        }
        
       function finish(){
           clearInterval(int1);
           clearInterval(time);
           alert("конец игры")
       if (score >= 15) {
       	alert('ты победил');
            g1.style.display = "none";
            ct.style.display = "none";
            box.style.display = "none";
		   	g1.style.backgroundImage = "url(win.png)";
            g1.style.display = "block";
		   	

       }
       if (score <= 15) {
       	alert('Ты проиграл');
        g1.style.display = "none";
        ct.style.display = "none";
       	g1.style.backgroundImage = "url(lose.png)";
       	g1.style.display = "block";
        box.style.display = "none";

       }
       }

    </script>
</body>
</html>